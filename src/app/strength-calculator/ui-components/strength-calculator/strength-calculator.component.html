<h2>Calculadora de Fuerza</h2>

<app-exercise-selection-modal (exerciseChange)="onExerciseChange($event)"></app-exercise-selection-modal>

<!-- Si hay pesos guardados, muestra las opciones de ver tabla de pesos, ver historial o realizar nuevo cálculo -->
<div *ngIf="selectedExercise && weightsStored">
  <button *ngIf="!showWeightTable && !showHistorial" (click)="showLastResultWeightTable()">Ver tabla de pesos</button>
  <button *ngIf="showWeightTable && !showHistorial && !resultsSaved" (click)="showHistorialTable()">Ver historial</button>
  <button *ngIf="showHistorial && !resultsSaved" (click)="showLastResultWeightTable()">Ver tabla</button>
  <button *ngIf="!resultsSaved" (click)="resetCalculator()">Realizar nuevo cálculo</button>
</div>

<!-- Si no hay pesos guardados o no se ha seleccionado un ejercicio, muestra el formulario de cálculo -->
<div *ngIf="!weightsStored && showCalculationForm">
  <h3>Cuanto peso utilizas</h3>
  <input type="number" [(ngModel)]="weight">
  <h3>Cuantas repeticiones lograste</h3>
  <input type="number" [(ngModel)]="repetitions">
  <button *ngIf="selectedExercise && weight && repetitions && !oneRM" (click)="onCalculate()">Calcular 1RM</button>
</div>

<app-calculation-result-modal *ngIf="oneRM && !resultsSaved" [oneRm]="oneRM" (close)="onModalClose()" (terminate)="onTerminate()"></app-calculation-result-modal>

<button *ngIf="oneRM && !resultsSaved" (click)="onSaveResults()" [disabled]="resultsSaved">Guardar resultados</button>
<button *ngIf="resultsSaved && !showHistorial" (click)="showHistorialTable()">Ver historial</button>
<button *ngIf="resultsSaved && showHistorial" (click)="showLastResultWeightTable()">Ver tabla</button>
<button *ngIf="oneRM && resultsSaved" (click)="resetCalculator()">Terminar</button>

<app-historial *ngIf="showHistorial" [selectedExercise]="selectedExercise" (closeHistorial)="onCloseHistorial()"></app-historial>

<app-strength-table *ngIf="showWeightTable" [strengthTable]="strengthTable"></app-strength-table>
